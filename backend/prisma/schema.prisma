generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Experience {
  id          String     @id @default(cuid())
  title       String
  description String
  price       Int
  images      String     // store comma-separated image URLs
  slots       Slot[]
  bookings    Booking[]
  createdAt   DateTime   @default(now())
}

model Slot {
  id            String     @id @default(cuid())
  experience    Experience @relation(fields: [experienceId], references: [id])
  experienceId  String
  date          DateTime
  time          String
  capacity      Int
  booked        Int        @default(0)

  @@index([experienceId])
}

model Promo {
  id        String   @id @default(cuid())
  code      String   @unique
  type      String
  amount    Int
  expiresAt DateTime?
}

model Booking {
  id             String     @id @default(cuid())
  experience     Experience @relation(fields: [experienceId], references: [id])
  experienceId   String
  slotId         String
  date           DateTime
  time           String
  quantity       Int
  customerName   String
  customerEmail  String
  subtotal       Int
  taxes          Int
  discount       Int
  total          Int
  createdAt      DateTime   @default(now())
}
